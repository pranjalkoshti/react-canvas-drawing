(this["webpackJsonpreact-canvas-drawing"]=this["webpackJsonpreact-canvas-drawing"]||[]).push([[0],{16:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(1),s=n.n(a),r=n(9),c=n.n(r),o=n(2),l=n(5),h=n(3),d=n(10),u=n(4),v=function(){function t(e,n,i,a,s){Object(h.a)(this,t),this.x=e,this.y=n,this.edge=i,this.width=i,this.height=a,this.color=s.fillColor,this.lineWidth=s.lineWidth,this.selected=!1,this.active=!1,this.activeColor=s.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.7*t.match(/\d\d/)[0])})),this.activeColor2=s.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.6*t.match(/\d\d/)[0])}))}return Object(u.a)(t,[{key:"draw",value:function(t){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),this.active,t.strokeRect(this.x,this.y,this.width,this.height),this.selected&&(t.lineWidth=2,t.strokeStyle=this.activeColor2,t.strokeRect(this.x,this.y,this.width,this.height))}},{key:"update",value:function(){this.x+=.1}},{key:"select",value:function(){this.selected=!this.selected}},{key:"activate",value:function(){this.active=!this.active}}]),t}(),f=function(){function t(e,n,i,a,s,r){Object(h.a)(this,t),this.x=e,this.y=n,this.radius=i,this.sAngle=a,this.eAngle=s,this.color=r.fillColor,this.lineWidth=r.lineWidth,this.selected=!1,this.active=!1,this.activeColor=r.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.7*t.match(/\d\d/)[0])})),this.activeColor2=r.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.6*t.match(/\d\d/)[0])}))}return Object(u.a)(t,[{key:"draw",value:function(t){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),this.active,t.arc(this.x,this.y,this.radius,this.sAngle,this.eAngle,!1),t.stroke()}},{key:"update",value:function(){this.x+=.1}},{key:"select",value:function(){this.selected=!this.selected}},{key:"activate",value:function(){this.active=!this.active}}]),t}(),g=function(){function t(e,n,i){Object(h.a)(this,t),this.start=e,this.end=n,this.color=i.fillColor,this.lineWidth=i.lineWidth,this.selected=!1,this.active=!1,this.activeColor=i.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.7*t.match(/\d\d/)[0])})),this.activeColor2=i.fillColor.replace(/,\d\d%\)/,(function(t){return t.replace(/\d\d/,.6*t.match(/\d\d/)[0])}))}return Object(u.a)(t,[{key:"draw",value:function(t){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),this.active,t.moveTo(this.start.x,this.start.y),t.lineTo(this.end.x,this.end.y),t.stroke(),t.stroke()}},{key:"update",value:function(){this.x+=.1}},{key:"select",value:function(){this.selected=!this.selected}},{key:"activate",value:function(){this.active=!this.active}}]),t}(),p=function t(){var e=this;Object(h.a)(this,t),this.cursorInRect=function(t,e,n,i,a,s){return t>n&&t<n+a&&(e>i&&e<i+s)},this.redrawCanvas=function(){var t=e.state,n=t.canvas,i=t.settings,a=t.shapes,s=n.getContext("2d");s.clearRect(0,0,n.width,n.height),i.canvasFillColor&&(s.fillStyle=i.canvasFillColor),a.forEach((function(t){t.instance&&t.instance.draw(s)}))},this.updateSettings=function(t){e.state.settings=Object(o.a)(Object(o.a)({},e.state.settings),t);e.state.canvas},this.getPosition=function(t){var n=e.state.canvas,i=n.getBoundingClientRect(),a=i.width/n.width,s=i.height/n.height;return{x:(t.clientX-i.left)/a,y:(t.clientY-i.top)/s}},this.updatesShapesArr=function(){var t=Object(d.a)(e.state.shapes);e.state.currentShape&&(t.push(e.state.currentShape),e.state.shapes=t,e.state.currentShape=null)},this.eraseCanvas=function(){var t=e.state.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height),e.state.shapes=[],e.onClear&&e.onClear()},this.handleMouseMove=function(t){var n=e.state,i=n.canvas,a=n.shapes,s=e.getPosition(t,i);t.preventDefault(),t.stopPropagation(),a.map((function(t){return e.cursorInRect(s.x,s.y,t.x,t.y,t.width,t.height)})).every((function(t){return!1===t}))?i.style.cursor="default":i.style.cursor="pointer",a.forEach((function(t){t.selected&&(t.x=s.x-t.offset.x,t.y=s.y-t.offset.y),e.cursorInRect(s.x,s.y,t.x,t.y,t.edge,t.edge)&&1!=t.active?t.instance.activate():t.active=!1}))},this.handleMouseDown=function(t){var n=e.state,i=n.canvas,a=(n.settings,i.getContext("2d"),e.getPosition(t,i));e.state.dragStartLocation=a,i.addEventListener("mousemove",e.drawShape),i.addEventListener("mouseup",e.finishDrawing),i.addEventListener("mouseout",e.finishDrawing)},this.drawShape=function(t){var n=e.state,i=n.canvas,a=n.settings,s=(a.fillBox,a.shape),r=(a.xor,a.lineWidth),c=a.fillColor,o=(a.polygonSides,a.polygonAngle,a.lineCap),l=i.getContext("2d"),h=e.getPosition(t,i);s&&(r&&(l.lineWidth=r),c&&(l.strokeStyle=c),o&&(l.lineCap=o),"freehand"==s&&e.drawLine1(h),"line"==s&&e.drawLine1(h),"circle"==s&&e.drawCircle1(h),"rect"==s&&e.drawRect1(h))},this.drawLine1=function(t){var n=e.state,i=n.canvas,a=n.dragStartLocation,s=n.settings,r=i.getContext("2d");e.redrawCanvas();var c=new g(a,t,s);c.draw(r),e.state.currentShape={type:"line",start:{x:a.x,y:a.y},end:{x:t.x,y:t.y},isDragging:!1,instance:c}},this.drawCircle1=function(t){var n=e.state,i=n.canvas,a=n.dragStartLocation,s=n.settings,r=i.getContext("2d");e.redrawCanvas();var c=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)),o=new f(a.x,a.y,c,0,2*Math.PI,s);o.draw(r),e.state.currentShape={type:"circle",x:a.x,y:a.y,radius:c,sAngle:0,eAngle:2*Math.PI,isDragging:!1,instance:o}},this.drawRect1=function(t){var n=e.state,i=n.canvas,a=n.dragStartLocation,s=n.settings,r=(n.prevPosition,i.getContext("2d"));e.redrawCanvas();var c=t.x-a.x,o=t.y-a.y,l=new v(a.x,a.y,c,o,s);l.draw(r),e.state.currentShape={type:"square",x:a.x,y:a.y,width:c,height:o,isDragging:!1,instance:l}},this.finishDrawing=function(t){e.redrawCanvas();var n=e.state,i=n.canvas,a=(n.shapes,i.getContext("2d"));e.drawShape(t,i,a),e.updatesShapesArr(),i.removeEventListener("mousemove",e.drawShape),i.addEventListener("mousemove",e.handleMouseMove),i.removeEventListener("mouseup",e.finishDrawing),i.removeEventListener("mouseout",e.finishDrawing)},this.addEventListeners=function(t){e.state.canvas=t,t.addEventListener("mousedown",e.handleMouseDown)},this.state={canvas:null,dragStartLocation:null,snapshot:null,dragging:!1,shapes:[],currentShape:null,is_touch_device:"ontouchstart"in document.documentElement,settings:{fillBox:!1,shape:"line",xor:!1,polygonSides:null,polygonAngle:null,lineCap:"round",textInput:"",fillColor:"#4c5685",lineWidth:5,lineJoin:"round",canvasFillColor:"#fff"}}},C=function(t){var e=Object(a.useRef)(null),n=Object(a.useState)(new p),s=Object(l.a)(n,2),r=s[0];s[1];return Object(a.useEffect)((function(){r.updateSettings(t.settings)}),[t.settings]),Object(a.useEffect)((function(){1==t.clearFlag&&r.eraseCanvas()}),[t.clearFlag]),Object(a.useEffect)((function(){r.addEventListeners(e.current)}),[]),r&&t.onDrawActionEnd&&(r.onDrawActionEnd=t.onDrawActionEnd),r&&t.onClear&&(r.onClear=t.onClear),Object(i.jsx)("canvas",{ref:e,id:t.id?t.id:"react-canvas",width:t.width?t.width:800,height:t.height?t.height:1200,style:Object(o.a)({},t.canvasStyle)})},w=function t(e){var n=this;Object(h.a)(this,t),this.updateCanvas=function(t){n.DrawingController.addEventListeners(t)},this.clearCanvas=function(){n.DrawingController.eraseCanvas()},this.settingsListener=function(t){n.DrawingController.updateSettings(t)},this.DrawingController=new p,this.DrawingController&&e.onDrawActionEnd&&(this.DrawingController.onDrawActionEnd=e.onDrawActionEnd),this.DrawingController&&e.onClear&&(this.DrawingController.onClear=e.onClear),this.DrawingController.addEventListeners(e.canvas)};var y=function(t){var e=Object(a.useRef)(null),n=Object(a.useState)({shape:"line",fillColor:"#4c5685",lineWidth:5,canvasFillColor:"#fff"}),s=Object(l.a)(n,2),r=s[0],c=s[1],h=Object(a.useState)(!1),d=Object(l.a)(h,2),u=d[0],v=d[1],f=Object(a.useState)(!1),g=Object(l.a)(f,2),p=g[0],y=g[1];Object(a.useEffect)((function(){var t=new w({canvas:e.current,onDrawActionEnd:j,onClear:x});y(t)}),[]);var j=function(){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{shape:null})}))},x=function(){v(!1)};return Object(a.useEffect)((function(){p&&p.settingsListener(r)}),[r]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("select",{onChange:function(t){c((function(e){return Object(o.a)(Object(o.a)({},e),{},{shape:t.target.value})}))},children:[Object(i.jsx)("option",{children:"line"}),Object(i.jsx)("option",{children:"circle"}),Object(i.jsx)("option",{children:"rect"})]}),Object(i.jsx)("input",{id:"fillColor",type:"color",step:"1",value:r.fillColor,onChange:function(t){c((function(e){return Object(o.a)(Object(o.a)({},e),{},{fillColor:t.target.value})}))}}),Object(i.jsx)("input",{type:"range",min:"1",max:"100",value:r.lineWidth,class:"slider",id:"myRange",onChange:function(t){c((function(e){return Object(o.a)(Object(o.a)({},e),{},{lineWidth:t.target.value})}))}}),Object(i.jsx)("button",{onClick:function(){v(!0),p.clearCanvas()},children:"Clear"}),Object(i.jsx)(C,{width:800,height:1200,canvasStyle:{border:"1px solid grey"},settings:Object(o.a)({},r),onDrawActionEnd:j,clearFlag:u,onClear:x,id:"react-canvas-1"}),Object(i.jsx)("div",{children:Object(i.jsx)("canvas",{ref:e,id:"react-canvas",width:500,height:800,style:{border:"1px solid grey"}})})]})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),i(t),a(t),s(t),r(t)}))};c.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root")),j()}},[[16,1,2]]]);
//# sourceMappingURL=main.5c81e883.chunk.js.map